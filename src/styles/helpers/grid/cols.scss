$col-width: 100%/$grid-columns;

.col-auto{
  flex: 0 0 auto;
  width: auto;
  max-width: 100%;
}
@for $i from $grid-columns through 1 {
  .col-#{$i}{
    width: $col-width * $i;
    padding-left: $grid-gutter-width;
    padding-right: $grid-gutter-width;
  }
}

@each $point, $screen-size in $grid-breakpoints {
  @if $point != xs{
    @media screen and (min-width: $screen-size){
      .col-auto-#{$point}{
        flex: 0 0 auto;
        width: auto;
        max-width: 100%;
      }
      @for $i from $grid-columns through 1 {
        .col-#{$i}-#{$point}{
          flex: 0 0 $col-width * $i;
          max-width: $col-width * $i;
          padding-left: $grid-gutter-width;
          padding-right: $grid-gutter-width;
        }
      }
    }
  }
}